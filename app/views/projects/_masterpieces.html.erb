<script type="text/javascript">
  var masterpieces = new Kazanie.Collections.Masterpieces([
    <% project.masterpieces.each do |masterpiece| %>
    new Kazanie.Models.Masterpiece({
      height:   <%= masterpiece.image.height %>,
      title:    '<%= masterpiece.title %>',
      text:     '<%= masterpiece.text %>',
      url:      '<%= masterpiece.image.url %>',
      miniurl:  '<%= masterpiece.image.thumb("x200").url %>',
      width:    <%= masterpiece.image.width %>,
      focals:   new Kazanie.Collections.Focals([
        <% masterpiece.focals.each do |focal| %>
        new Kazanie.Models.Focal({
          x:        <%= focal.x %>,
          y:        <%= focal.y %>,
          height:   <%= focal.height %>,
          width:    <%= focal.width %>,
          url:      '<%= focal.image.url(:suffix => '.png') %>',
          title:    '<%= focal.title %>',
          text:     '<%= focal.text %>'
        }),
        <% end %>
      ])
    }),
    <% end %>
  ]);
</script>
